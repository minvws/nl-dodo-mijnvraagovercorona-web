---
import { HTMLAttributes } from 'astro/types';
import {
	SiteSettingsProps,
	useSiteSettings,
} from 'src/utilities/api/queries/translated';
import { getLocaleFromURL, Locale } from 'src/utilities/locale/translation';
import { Icon } from '../Icon';

interface Props extends HTMLAttributes<'button'> {}

const { class: className, ...attrs } = Astro.props;
const locale = getLocaleFromURL(Astro.url.pathname) as Locale;
const siteSettings: SiteSettingsProps = await useSiteSettings({ locale });
---

<button
	type="button"
	class={`e-close-button${className ? ` | ${className}` : ''}`}
	{...attrs}
>
	<Icon name="cross" class="e-close-button__icon" />
	<span class="u-visually-hidden">
		{siteSettings.genericLabels.close}
	</span>
</button>

<style lang="scss">
	@use '@design-system-styles/tools/_a11y.scss';

	.e-close-button,
	.e-close-button__icon.e-close-button__icon {
		display: block;
	}

	.e-close-button {
		padding: var(--space-r-nano);
		border-radius: 50%;
		border: 1px solid var(--color-grijs-3);
		color: var(--color-diepblauw);
		background-color: var(--color-white);
		cursor: pointer;

		&:hover {
			color: var(--color-accent-robijnrood);
		}
		&:focus {
			@include a11y.focusring;
		}
	}
</style>
