---
import {
	getLocaleFromURL,
	prefixUrlWithlocale,
} from 'src/utilities/locale/translation';

export interface Props {
	buttons: {
		_key: string;
		standard: boolean;
		assistanceDialog: boolean;
		text: string;
		next: string;
		styledAs?: string;
		disabled?: boolean;
	}[];
}

const { buttons } = Astro.props;
const locale = getLocaleFromURL(Astro.url.pathname);
---

{
	buttons.map((button, index) => {
		console.log('button', button);

		return button.standard ? (
			<button
				type="submit"
				disabled={button.disabled}
				formaction={
					button.next ? prefixUrlWithlocale(button.next, locale) : null
				}
			>
				{button.text}
			</button>
		) : button.assistanceDialog /* TODO: && page.assistance.title */ ? (
			<mark>dialog: {button.text}</mark>
		) : (
			<a href={prefixUrlWithlocale(button.next, locale)}>{button.text}</a>
		);
	})
}
