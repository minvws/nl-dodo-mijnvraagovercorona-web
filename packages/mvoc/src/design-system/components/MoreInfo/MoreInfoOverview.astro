---
import { HTMLAttributes } from 'astro/types';
import { Locale, getLocaleFromURL } from 'src/utilities/locale/translation';
import { MoreInfoButton } from '.';
import { MoreInfoProps } from 'src/utilities/api/queries';
import { getFullPageUrl } from 'src/utilities/helpers/page-subfolder';
import { parseLink } from 'src/utilities/helpers/link';

interface Props extends HTMLAttributes<'div'> {
	items: MoreInfoProps['items'];
}

const { class: className, items, ...attrs } = Astro.props;
const locale = getLocaleFromURL(Astro.url.pathname) as Locale;
---

<ul
	class={`c-more-info-overview${className ? ` | ${className}` : ''}`}
	{...attrs}
	role="list"
>
	{
		items.map((item) => (
			<li>
				<MoreInfoButton
					href={parseLink(getFullPageUrl(item), locale)}
					icon={item.icon}
					label={item.title}
				/>
			</li>
		))
	}
</ul>

<style lang="scss">
	@use '@design-system-styles/primitives/_responsive.scss';
	.c-more-info-overview {
		> li {
			&:not(:first-of-type) {
				margin-block-start: var(--space-4);
			}
		}
	}
</style>
