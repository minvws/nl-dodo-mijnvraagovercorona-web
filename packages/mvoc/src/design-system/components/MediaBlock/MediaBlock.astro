---
import { HTMLAttributes } from 'astro/types';
import { ImageProps } from 'src/utilities/api/queries';
import { Stack } from '@design-system/components/Layout/Stack';

interface Props extends HTMLAttributes<'div'> {
	icon?: ImageProps;
}

const { icon, class: className, ...attrs } = Astro.props;
---

<div class={`c-media-block${className ? ` | ${className}` : ''}`} {...attrs}>
	{
		icon && icon.src ? (
			<img class="c-media-block__icon" src={icon.src} alt="" loading="lazy" />
		) : null
	}
	<Stack gap="small">
		<slot />
	</Stack>
</div>

<style lang="scss">
	@use '@design-system-styles/primitives/_responsive.scss';

	.c-media-block {
		--c-media-block-icon-size: var(--space-r-large);
		--c-media-block-icon-alignment: center;
		--c-media-block-gap: var(--stack-base);
		display: flex;
		align-items: var(--c-media-block-icon-alignment);
		gap: var(--c-media-block-gap);

		@media --mq-large {
			--c-media-block-icon-size: var(--space-r-giant);
		}
	}

	.c-media-block__icon {
		flex: 0 0 var(--c-media-block-icon-size);
		max-inline-size: var(--c-media-block-icon-size);
		aspect-ratio: 1/1;
		object-fit: contain;
	}
</style>
