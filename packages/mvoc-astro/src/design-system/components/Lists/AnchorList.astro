---
import { Button } from '@design-system/elements/Button';
import { HTMLAttributes } from 'astro/types';
import { ImageProps } from 'src/utilities/api/queries';
import { GridFluid } from '../Layout/Grid';

interface ItemProps {
	label: string;
	href: string;
	image?: ImageProps;
}

interface Props extends HTMLAttributes<'div'> {
	items: ItemProps[];
	as?: 'ol' | 'ul';
}

const { class: className, as = 'ul', items } = Astro.props;
---

<GridFluid as={as} class={`c-anchor-list${className ? ` | ${className}` : ''}`}>
	{
		items.map((item) => (
			<li class="c-anchor-list__item">
				<Button
					class="c-anchor-list__button"
					href={item.href}
					variant="tertiary"
					icon="chevron-small-down"
					interactionIconAnimation="bounce"
					full
				>
					<span class="c-anchor-list__button-inner">
						{item.image && item.image.src ? (
							<img
								class="c-anchor-list__button-image"
								src={item.image.src}
								alt=""
								loading="lazy"
							/>
						) : as === 'ol' ? (
							<span class="c-anchor-list__button-step" />
						) : null}
						{item.label}
					</span>
				</Button>
			</li>
		))
	}
</GridFluid>

<style lang="scss">
	.c-anchor-list {
		--grid-fluid-gap: var(--stack-small);
		--grid-fluid-min-item-size: 16rem;
		--anchor-list-icon-size: var(--space-s-large);
		counter-reset: anchor-list-counter;
	}

	.c-anchor-list__item {
		display: flex;
		counter-increment: anchor-list-counter;
	}

	.c-anchor-list__button {
		--button-icon-color: var(--color-accent-robijnrood);
	}

	.c-anchor-list__button-inner {
		display: flex;
		align-items: center;
		gap: var(--space-r-tiny);
	}

	.c-anchor-list__button-image {
		inline-size: var(--anchor-list-icon-size);
		aspect-ratio: 1 / 1;
		object-fit: contain;
	}

	.c-anchor-list__button-step {
		display: flex;
		align-items: center;
		justify-content: center;
		block-size: var(--anchor-list-icon-size);
		aspect-ratio: 1 / 1;
		border-radius: 50%;
		text-align: center;
		background-color: var(--color-diepblauw);
		color: var(--color-white);
		&::before {
			content: counter(anchor-list-counter);
		}
	}
</style>
