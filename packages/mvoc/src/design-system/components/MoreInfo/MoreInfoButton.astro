---
import { Button } from '@mvoc/ui/elements';
import type { HTMLAttributes } from 'astro/types';
import type { ImageProps } from 'src/utilities/api/queries';
import { isExternalUrl } from 'src/utilities/helpers/external-url';

interface Props extends HTMLAttributes<'div'> {
	label: string;
	href: string;
	icon: ImageProps;
}

const { label, href, icon } = Astro.props;
const isExternal = isExternalUrl(href);
---

<Button
	class="c-more-info-button"
	variant="quaternary"
	href={href}
	icon="chevron-small-right"
	interactionIconAnimation="swing"
	full
	isExternal={isExternal}
>
	<span class="c-more-info-button__inner">
		{
			icon.src ? (
				<img
					class="c-more-info-button__icon"
					src={icon.src}
					alt=""
					loading="lazy"
				/>
			) : null
		}
		{label}
	</span>
</Button>

<style lang="scss">
	@use '@mvoc/ui/styles/tools/rem';
	@use '@mvoc/ui/styles/primitives/responsive';

	.c-more-info-button {
		--button-padding-block: var(--space-6);
		--c-more-info-button__icon-size: #{rem.convert(44px)};
	}

	.c-more-info-button__inner {
		display: flex;
		align-items: center;
		gap: var(--space-3);
	}

	.c-more-info-button__icon {
		inline-size: var(--c-more-info-button__icon-size);
		aspect-ratio: 1 / 1;
		object-fit: contain;
		object-position: center center;
	}
</style>
