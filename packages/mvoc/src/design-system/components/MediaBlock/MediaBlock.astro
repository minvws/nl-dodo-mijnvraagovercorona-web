---
import type { HTMLAttributes } from 'astro/types';
import type { ImageProps } from 'src/utilities/api/queries';
import { Stack } from '@mvoc/ui/components';

interface Props extends HTMLAttributes<'div'> {
	icon?: ImageProps;
}

const { icon, class: className, ...attrs } = Astro.props;
---

<div
	class={`c-media-block${icon ? ' c-media-block--has-icon' : ''}${
		className ? ` | ${className}` : ''
	}`}
	{...attrs}
>
	{
		icon && icon.src ? (
			<img class="c-media-block__icon" src={icon.src} alt="" loading="lazy" />
		) : null
	}
	<Stack gap={4}>
		<slot />
	</Stack>
</div>

<style lang="scss">
	@use '@mvoc/ui/styles/primitives/responsive';

	.c-media-block {
		--c-media-block-icon-size: var(--space-8);
		--c-media-block-icon-alignment: center;
		--c-media-block-gap: var(--space-6);
		display: flex;
		align-items: var(--c-media-block-icon-alignment);
		gap: var(--c-media-block-gap);

		@media (--mq-large) {
			--c-media-block-icon-size: var(--space-10);
		}
	}

	.c-media-block__icon {
		flex: 0 0 var(--c-media-block-icon-size);
		max-inline-size: var(--c-media-block-icon-size);
		aspect-ratio: 1/1;
		object-fit: contain;
	}
</style>
