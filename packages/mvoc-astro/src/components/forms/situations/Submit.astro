---
import { Button } from '@design-system/elements/Button';
import { Modal } from '@design-system/components/Modal';
import {
	getLocaleFromURL,
	prefixUrlWithlocale,
} from 'src/utilities/locale/translation';

export interface Props {
	buttons: {
		_key: string;
		standard: boolean;
		assistanceDialog: boolean;
		text: string;
		next: string;
		disabled?: boolean;
	}[];
}

const { buttons } = Astro.props;
const locale = getLocaleFromURL(Astro.url.pathname);
---

<div>
	{
		buttons.map((button, index) =>
			button.standard ? (
				<Button
					type="submit"
					disabled={button.disabled}
					formaction={
						button.next ? prefixUrlWithlocale(button.next, locale) : undefined
					}
					variant={index === 0 ? 'primary' : 'secondary'}
				>
					{button.text}
				</Button>
			) : button.assistanceDialog ? (
				<>
					<Button
						id="assistance-dialog"
						variant={index === 0 ? 'primary' : 'secondary'}
					>
						{button.text}
					</Button>
					<Modal id="assistance-dialog" title="TODO: title">
						<mark>TODO: Assistance row</mark>
					</Modal>
				</>
			) : (
				<Button
					href={prefixUrlWithlocale(button.next, locale)}
					variant={index === 0 ? 'primary' : 'secondary'}
				>
					{button.text}
				</Button>
			),
		)
	}
</div>
