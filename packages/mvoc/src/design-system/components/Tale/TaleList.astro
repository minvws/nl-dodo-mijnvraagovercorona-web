---
import type { TaleCollectionProps } from 'src/utilities/api/queries';
import { Tale } from '.';
import { Stack } from '../Layout/Stack';
import { Disclosure, DisclosureItem } from '../Disclosure';
import { stringToSlug } from 'src/utilities/stringToSlug';
import { Retain } from '../Layout/Retain';

interface Props extends TaleCollectionProps {
	asDisclosure?: boolean;
}

const { taleCollection, asDisclosure } = Astro.props;
---

<>
	{
		asDisclosure ? (
			<Retain variant="text">
				<Disclosure>
					{taleCollection.map((tale) => (
						<DisclosureItem
							headingLevel={2}
							headingStyledAs={4}
							accordeon
							label={tale.title}
							id={stringToSlug(tale.title)}
							itemscope
							itemprop="mainEntity"
							itemtype="https://schema.org/Question"
						>
							<Tale {...tale} renderTitle={false} anchorable={false} />
						</DisclosureItem>
					))}
				</Disclosure>
			</Retain>
		) : (
			<Stack class="c-tale" gap={14}>
				{taleCollection.map((tale) => (
					<Tale {...tale} />
				))}
			</Stack>
		)
	}
</>
