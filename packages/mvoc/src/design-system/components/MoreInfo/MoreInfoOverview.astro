---
import type { HTMLAttributes } from 'astro/types';
import type { Locale } from 'src/utilities/locale/translation';
import { getLocaleFromURL } from 'src/utilities/locale/translation';
import { MoreInfoButton } from '.';
import type { MoreInfoProps } from 'src/utilities/api/queries';
import { getFullPageUrl } from 'src/utilities/helpers/page-subfolder';
import { parseLink } from 'src/utilities/helpers/link';
import { GridFluid } from '../Layout/Grid';

interface Props extends HTMLAttributes<'div'> {
	items: MoreInfoProps['items'];
}

const { class: className, items, ...attrs } = Astro.props;
const locale = getLocaleFromURL(Astro.url.pathname) as Locale;
---

<GridFluid
	class={`c-more-info-overview${className ? ` | ${className}` : ''}`}
	as="ul"
	{...attrs}
>
	{
		items.map((item) => (
			<li>
				<MoreInfoButton
					href={parseLink(getFullPageUrl(item), locale)}
					icon={item?.overview?.icon || item.icon}
					label={item?.overview?.title || item.title}
				/>
			</li>
		))
	}
</GridFluid>

<style lang="scss">
	@use '@design-system-styles/primitives/_responsive.scss';
	@use '@design-system-styles/tools/_rem.scss';

	.c-more-info-overview {
		--grid-fluid-min-item-size: #{rem.convert(324px)};
	}
</style>
