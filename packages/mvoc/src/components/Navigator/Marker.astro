---
import { MarkerIcon } from '@mvoc/ui/elements';
import type { HTMLAttributes } from 'astro/types';

interface Props extends HTMLAttributes<'div'> {}

const { class: className, ...attrs } = Astro.props;
---

<div class={`c-marker${className ? ` | ${className}` : ''}`} {...attrs}>
	<button class="c-marker__button" type="button">
		<span class="u-visually-hidden" data-name></span>
		<MarkerIcon />
	</button>
</div>

<style lang="scss">
	@use '@mvoc/ui/styles/tools/a11y';

	.c-marker {
		pointer-events: none;
		z-index: 2;
		&.is-open-location,
		&.is-test-location {
			z-index: 3;
		}
		&.is-active-location {
			z-index: 4;
		}
		&:focus-within,
		&:has(button:hover),
		&.is-hovered {
			z-index: 5;
		}
	}

	.c-marker__button {
		--marker-adjustment: translateY(-40%);
		cursor: pointer;
		outline: none;
		transform-origin: bottom center;
		transform: var(--marker-adjustment);
		transition: transform 100ms ease-in-out;
		pointer-events: auto;

		&:focus {
			@include a11y.focusring;
		}
		&:hover {
			transform: var(--marker-adjustment) scale(1.1);
		}
	}
</style>
